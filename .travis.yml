dist: trusty
sudo: required
services:
    - docker
cache:
    directories:
        - node_modules
        - $HOME/gopath/pkg
language: go
go:
    - 1.11.x
addons:
  apt:
    sources:
      - sourceline: 'ppa:masterminds/glide'
    packages:
      - glide
env:
    global:
        - KIVIK_TEST_DSN_COUCH21="http://admin:abc123@localhost:6002/"
    matrix:
        - MODE=standard NPM_PROFILE=pouchdb6-package.json
        - MODE=standard NPM_PROFILE=pouchdb7-package.json
        - MODE=linter

install:
    - ./travis/install.sh $MODE

script:
    - ./travis/test.sh $MODE
